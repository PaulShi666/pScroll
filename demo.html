<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,height=device-height,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Title</title>
</head>
<body>
<ul id="wrapper">
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
    <li>row</li>
</ul>

<script src="pScroll.js"></script>
<script>
//    function requestData() {
//        var xhr = new XMLHttpRequest();
//        var xhrData;
//        var pageIndex = 1;
//        xhr.open("GET", "data.txt?index=" + pageIndex);
//        xhr.onreadystatechange = function (e) {
//            if (this.readyState == 4 && this.status == 200) {
//                xhrData = this.response;
//            }
//        };
//        xhr.send();
//    }
    //basic
    // 使用PScroll()初始化无限滚动插件
    // 方法new PScroll(dom,options)
    // 第一个参数为绑定节点的id或class,在该节点内无限加载内容
    //    var myScrollBasic = new PScroll("#wrapper",{
    //
    ////        navSelector  : "div.navigation",
    ////        //页面导航节点
    ////
    ////
    ////        nextSelector : "div.navigation a:first",
    ////        //下一页按钮节点
    ////
    ////        itemSelector : "#content div.post"
    ////        //在该节点内无限加载内容
    //    });

    //advanced
    // 使用PScroll()初始化无限滚动插件
    // 方法new PScroll(dom,options,[callback])
    var myScrollAdvanced = new PScroll("#wrapper", {
        onScroll: function(index){
            var xhr = new XMLHttpRequest();
            var xhrData;
            xhr.open("GET", "data.txt?index=" + index);
            xhr.onreadystatechange = function (e) {
                if (this.readyState == 4 && this.status == 200) {
                   // xhrData = this.response;

                    myScrollAdvanced.load(this.response);

                }
            };
            xhr.send();
        },
//        navSelector  : "div.navigation",
//        //页面导航节点
//
//        nextSelector : "div.navigation a:first",
//        //下一页按钮节点
//
//        itemSelector : "#content div.post",
//        //在该节点内无限加载内容
//
//        debug        : true,
//        //开启调试

//        loadingImg   : "/img/loading.gif",
//        // loading时的显示
//
//        loadingText  : "Loading new posts...",
//        // text accompanying loading image
//        // default: "<em>Loading the next set of posts...</em>"

        loadingHtml:"正在加载",
        loadingHtmlId:"PScrollLoading",
        onLoading: function () {

        },

//        animate      : true,
//        //动画

        bottomScrollPx: 100,
        //距离底部多少像素时进行加载

//        onDone:function(){
//
//        }
//        donetext     : "I think we've hit the end, Jim" ,
//        //当全部翻滚完毕时进行操作
//
//        errorCallback: function(){}
//        //请求返回错误时的回调

    }, function (newElements) {

        //当新节点加载后的回调


    });
</script>
</body>
</html>